<!DOCTYPE HTML>
<html>
<head>
<title>Access Control with New API</title>
<script type="text/javascript" src="../../../tests/qunit/qunit-bootstrap.js"></script>
<script type="text/javascript" src="../../../mwEmbedLoader.php"></script>
<script type="text/javascript" src="../../../docs/js/doc-bootstrap.js"></script>
<script type="text/javascript">	
function jsKalturaPlayerTest( videoId ){
	
	// Name this module
	QUnit.module( "Access Control Preview" );

	var $iframe = $('#' + videoId + '_ifp').contents();

	QUnit.test( "Iframe in DOM", function() {
		QUnit.ok( $('#' + videoId + '_ifp').length , 'iframe found' );
	});

	QUnit.test("error message element", function(){
		var done1 = QUnit.async();
		kalturaQunitWaitForPlayer(function(){
			QUnit.ok( $iframe.find('.error').length, ".error found" );
//			done1();
//			start();
		});
	});
}
</script>
<!-- qunit-kaltura must come after qunit-bootstrap.js and after mwEmbedLoader.php and after any jsCallbackReady stuff-->
<script type="text/javascript" src="resources/qunit-kaltura-bootstrap.js"></script>
</head>
<body>
<h2> Access Control with New API </h2>
<h3> This test uses the actions/messages access control api to block the player and display custom message</h3>

<br />
<div id="kdp" style="width:640px;height:480px;"></div>
<script type="text/javascript">
        KWidget.embed('kdp', {
            'wid' : '_423851',
            'uiconf_id' : '7752572',
            'entry_id' : '1_xkcw4th2'
        });
		QUnit.reset();
</script>
<br />
</body>
</html>