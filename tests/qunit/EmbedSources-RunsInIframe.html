<!DOCTYPE HTML>
<html>
<head>
	
	<link rel="stylesheet" href="http://code.jquery.com/qunit/git/qunit.css" type="text/css" media="screen" />

	<script src="http://code.jquery.com/jquery-latest.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/qunit/git/qunit.js"></script>
	<script type="text/javascript" src="http://staging.html5video.org/testswarm/js/inject.js"></script>
	
	<script src="EmbedPlaybackTests.js"></script>

<script>

var $$ = jQuery.noConflict(true);
var $ = jQuery = null; // will always run the tested page's jquery from $
var mw = null; // we will be grabbing the mw from the iframe

var testLocation = "../test_files/mwEmbed_HTML5.html";
var videoSelector = "#video"

QUnit.config.autostart = false;

$$(document).ready(function(){
	$$(document.body).append('<iframe name="testFrame" id="testFrame" src="'+testLocation+'" width="100%" height="500px" border="none">');
	
	$$('#testFrame').load(function () {
		setTimeout( function(){
			mw = window.frames["testFrame"].mw;
			mw.ready(function(){
				//grab jQuery from inside the document
				$ = jQuery = window.frames["testFrame"].$j;
				QUnit.start();
				runEmbedPlaybackTests(videoSelector);
			});
		}, 5000);

	});
});

</script>
</head>
<body>
	<h1 id="qunit-header">QUnit example</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup, will be hidden</div>
</body>
</html>
